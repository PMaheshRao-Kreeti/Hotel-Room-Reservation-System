<div class="col-lg-12">
  <%if flash[:notice].present?%>
    <div class="alert alert-success">
      <%= flash[:notice] %>
    </div>
  <% end %>
  
  <div class="card mt-5 mb-3">
    <div class="card-body">
      <h2 class="text-center">Booking History</h2>
    </div>
  </div>

  <div class="alert alert-warning">Reminder  
    <ul>
      <li>Once the booking is accepted or rejected you cannot cancel it.</li>
    </ul>
  </div>

  <%= link_to "Back to Hotels", hotels_path, class: "btn btn-warning"%>

  <% if @bookings.present? %>
    <% @bookings.each do |booking| %>
      <div class="row m-5">
        <div class="col-lg-12">
          <div class="card ">
            <div class="card-title h3 p-2">Hotel : <%= booking.hotel_name %></div>
              <% if booking.booking_status == 'approved'%>
                <div class="card-text p-2"><strong> Booking Status : <span class="text-success text-uppercase"><%= booking.booking_status %></span></strong></div>
              <% elsif booking.booking_status == 'rejected' || booking.booking_status == 'cancelled'%>
                <div class="card-text p-2"><strong> Booking Status : <span class="text-danger text-uppercase"><%= booking.booking_status %></span></strong></div>
              <% else %>
                <div class="card-text p-2"><strong> Booking Status : <span class="text-warning text-uppercase"><%= booking.booking_status %></span></strong></div>
              <% end %>
              
              <div class="card-text p-2"><strong> Booked At : <span class="text-success "><%= booking.created_at.localtime %></span></strong></div>

              <div class="row p-3">
                <div class="col-lg-4">
                <div class="card-text"><strong>Guest Name</strong> : <%= booking.guest_name %>  </div>
                <div class="card-text"><strong>Booking email</strong> : <%= booking.user.email %>  </div>
                <div class="card-text"><strong>Number of Guest</strong> : <%= booking.no_of_guest %> </div>
                <div class="card-text"><strong>Room Type</strong> : <%= booking.room_type %>   </div>
              </div>
              <div class="col-lg-4">
                <div class="card-text"><strong>Check In Date</strong> : <%= booking.check_in_date  %> </div>
                <div class="card-text"><strong>Check Out Date</strong> : <%= booking.check_out_date %> </div>
                <%if booking.booking_status == 'approved' %>
                  <div class="card-text"><strong>Room ID Given : </strong><%= booking.room_id %> </div>
                <% end %>
              </div>
              <div class="col-lg-4">
                <% if booking.booking_status == 'pending' %>
                  <div class="card-text p-4">
                    <%= link_to 'Cancel Booking', booking_cancelled_path(booking), class: 'btn btn-md btn-danger', method: :post, data: { confirm: 'Are you sure? You want to cancel this booking?' } %>
                  </div>
                <% else %>
                  <div class="card-text p-4">
                    <%= link_to 'Cancel Booking', booking_cancelled_path(booking), class: 'btn btn-md btn-danger disabled' %>
                  </div>  
                <% end %>

              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  <% else %>
  <div class="card shadow rounded m-2 text-danger">
    <div class="card-body p-3 m-3">      
      <div class="card-title h3">
        No Booking History !!! Book some room first to watch booking history !!!
      </div>
    </div>
  </div>
  <% end %>
  


</div>